#ifndef PIDS_DECODER_H
#define PIDS_DECODER_H

// PIDDefinition holds how each OBD2 PID should be decoded
struct PIDDefinition
{
    const char *name; // Name of the PID (e.g., Engine RPM)
    float scale;      // Multiplier for raw value
    float offset;     // Offset to apply after scaling
    int bitLength;    // Number of bits (8 or 16 usually)
    const char *unit; // Unit of the value (e.g., rpm, Â°C)
};

#include <map>
#include <stdint.h>

// This map links each PID to its decoding info
std::map<uint8_t, PIDDefinition> pidTable = {
    {0x02, {"Freeze DTC", 1.0, 0.0, 16, "Encoded"}},
    {0x03, {"Fuel system status", 1.0, 0.0, 16, "Encoded"}},
    {0x04, {"Calculated engine load", 0.3921568627, 0.0, 8, "%"}},
    {0x05, {"Engine coolant temperature", 1.0, -40.0, 8, "degC"}},
    {0x06, {"Short term fuel trim (bank 1)", 0.78125, -100.0, 8, "%"}},
    {0x07, {"Long term fuel trim (bank 1)", 0.78125, -100.0, 8, "%"}},
    {0x08, {"Short term fuel trim (bank 2)", 0.78125, -100.0, 8, "%"}},
    {0x09, {"Long term fuel trim (bank 2)", 0.78125, -100.0, 8, "%"}},
    {0x0A, {"Fuel pressure (gauge pressure)", 3.0, 0.0, 8, "kPa"}},
    {0x0B, {"Intake manifold absolute pressure", 1.0, 0.0, 8, "kPa"}},
    {0x0C, {"Engine speed", 0.25, 0.0, 16, "rpm"}},
    {0x0D, {"Vehicle speed", 1.0, 0.0, 8, "km/h"}},
    {0x0E, {"Timing advance", 0.5, -64.0, 8, "deg"}},
    {0x0F, {"Intake air temperature", 1.0, -40.0, 8, "degC"}},
    {0x10, {"Mass air flow sensor air flow rate", 0.01, 0.0, 16, "grams/sec"}},
    {0x11, {"Throttle position", 0.3921568627, 0.0, 8, "%"}},
    {0x12, {"Commanded secondary air status", 1.0, 0.0, 8, "Encoded"}},
    {0x14, {"Oxygen sensor 1 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x15, {"Oxygen sensor 2 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x16, {"Oxygen sensor 3 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x17, {"Oxygen sensor 4 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x18, {"Oxygen sensor 5 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x19, {"Oxygen sensor 6 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x1A, {"Oxygen sensor 7 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x1B, {"Oxygen sensor 8 (voltage)", 0.005, 0.0, 8, "volts"}},
    {0x1C, {"OBD standards the vehicle conforms to", 1.0, 0.0, 8, "Encoded"}},
    {0x1F, {"Run time since engine start", 1.0, 0.0, 16, "seconds"}},
    {0x21, {"Distance traveled with MIL on", 1.0, 0.0, 16, "km"}},
    {0x22, {"Fuel rail pres. (rel. to manifold vacuum)", 0.079, 0.0, 16, "kPa"}},
    {0x23, {"Fuel rail gauge pres. (diesel, gas inject)", 10.0, 0.0, 16, "kPa"}},
    {0x24, {"Oxygen sensor 1 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x25, {"Oxygen sensor 2 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x26, {"Oxygen sensor 3 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x27, {"Oxygen sensor 4 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x28, {"Oxygen sensor 5 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x29, {"Oxygen sensor 6 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x2A, {"Oxygen sensor 7 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x2B, {"Oxygen sensor 8 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x2C, {"Commanded EGR", 0.3921568627, 0.0, 8, "%"}},
    {0x2D, {"EGR Error", 0.78125, -100.0, 8, "%"}},
    {0x2E, {"Commanded evaporative purge", 0.3921568627, 0.0, 8, "%"}},
    {0x2F, {"Fuel tank level input", 0.3921568627, 0.0, 8, "%"}},
    {0x30, {"Warmups since DTCs cleared", 1.0, 0.0, 8, "count"}},
    {0x31, {"Distance traveled since DTCs cleared", 1.0, 0.0, 16, "km"}},
    {0x32, {"Evap. system vapor pressure", 0.25, 0.0, 16, "Pa"}},
    {0x33, {"Absolute barometric pressure", 1.0, 0.0, 8, "kPa"}},
    {0x34, {"Oxygen sensor 1 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x35, {"Oxygen sensor 2 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x36, {"Oxygen sensor 3 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x37, {"Oxygen sensor 4 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x38, {"Oxygen sensor 5 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x39, {"Oxygen sensor 6 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x3A, {"Oxygen sensor 7 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x3B, {"Oxygen sensor 8 (air-fuel equiv. ratio)", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x3C, {"Catalyst temperature (bank 1, sensor 1)", 0.1, -40.0, 16, "degC"}},
    {0x3D, {"Catalyst temperature (bank 2, sensor 1)", 0.1, -40.0, 16, "degC"}},
    {0x3E, {"Catalyst temperature (bank 1, sensor 2)", 0.1, -40.0, 16, "degC"}},
    {0x3F, {"Catalyst temperature (bank 2, sensor 2)", 0.1, -40.0, 16, "degC"}},
    {0x42, {"Control module voltage", 0.001, 0.0, 16, "V"}},
    {0x43, {"Absolute load value", 0.3921568627, 0.0, 16, "%"}},
    {0x44, {"Commanded air-fuel equiv. ratio ", 3.051757813e-05, 0.0, 16, "ratio"}},
    {0x45, {"Relative throttle position", 0.3921568627, 0.0, 8, "%"}},
    {0x46, {"Ambient air temperature", 1.0, -40.0, 8, "degC"}},
    {0x47, {"Absolute throttle position B", 0.3921568627, 0.0, 8, "%"}},
    {0x48, {"Absolute throttle position C", 0.3921568627, 0.0, 8, "%"}},
    {0x49, {"Accelerator pedal position D", 0.3921568627, 0.0, 8, "%"}},
    {0x4A, {"Accelerator pedal position E", 0.3921568627, 0.0, 8, "%"}},
    {0x4B, {"Accelerator pedal position F", 0.3921568627, 0.0, 8, "%"}},
    {0x4C, {"Commanded throttle actuator", 0.3921568627, 0.0, 8, "%"}},
    {0x4D, {"Time run with MIL on", 1.0, 0.0, 16, "minutes"}},
    {0x4E, {"Time since DTCs cleared", 1.0, 0.0, 16, "minutes"}},
    {0x4F, {"Max fuel-air equiv. ratio", 1.0, 0.0, 8, "ratio"}},
    {0x50, {"Max air flow rate from MAF sensor", 10.0, 0.0, 8, "g/s"}},
    {0x51, {"Fuel type", 1.0, 0.0, 8, "Encoded"}},
    {0x52, {"Ethanol fuel percentage", 0.3921568627, 0.0, 8, "%"}},
    {0x53, {"Absolute evap system vapor pressure", 0.005, 0.0, 16, "kPa"}},
    {0x54, {"Evap system vapor pressure", 1.0, -32767.0, 16, "Pa"}},
    {0x55, {"Short term sec. oxygen trim (bank 1)", 0.78125, -100.0, 8, "%"}},
    {0x56, {"Long term sec. oxygen trim (bank 1)", 0.78125, -100.0, 8, "%"}},
    {0x57, {"Short term sec. oxygen trim (bank 2)", 0.78125, -100.0, 8, "%"}},
    {0x58, {"Long term sec. oxygen trim (bank 2)", 0.78125, -100.0, 8, "%"}},
    {0x59, {"Fuel rail absolute pressure", 10.0, 0.0, 16, "kPa"}},
    {0x5A, {"Relative accelerator pedal position", 0.3921568627, 0.0, 8, "%"}},
    {0x5B, {"Hybrid battery pack remaining life", 0.3921568627, 0.0, 8, "%"}},
    {0x5C, {"Engine oil temperature", 1.0, -40.0, 8, "degC"}},
    {0x5D, {"Fuel injection timing", 0.0078125, -210.0, 16, "deg"}},
    {0x5E, {"Engine fuel rate", 0.05, 0.0, 16, "L/h"}},
    {0x5F, {"Emission requirements", 1.0, 0.0, 8, "Encoded"}},
    {0x61, {"Demanded engine percent torque", 1.0, -125.0, 8, "%"}},
    {0x62, {"Actual engine percent torque", 1.0, -125.0, 8, "%"}},
    {0x63, {"Engine reference torque", 1.0, 0.0, 16, "Nm"}},
    {0x64, {"Engine pct. torque (idle)", 1.0, -125.0, 8, "%"}},
    {0x65, {"Auxiliary input/output supported", 1.0, 0.0, 8, "Encoded"}},
    {0x66, {"Mass air flow sensor (A)", 0.03125, 0.0, 16, "grams/sec"}},
    {0x67, {"Engine coolant temperature (sensor 1)", 1.0, -40.0, 8, "degC"}},
    {0x68, {"Intake air temperature (sensor 1)", 1.0, -40.0, 8, "degC"}},
    {0x7C, {"Diesel particulate filter - temperature", 0.1, -40.0, 16, "degC"}},
    {0x8D, {"Throttle position G", 0.3921568627, 0.0, 8, "%"}},
    {0x8E, {"Engine friction percent torque", 1.0, -125.0, 8, "%"}},
    {0xA2, {"Cylinder fuel rate", 0.03125, 0.0, 16, "mg/stroke"}},
    {0xA4, {"Transmission actual gear", 0.001, 0.0, 16, "ratio"}},
    {0xA5, {"Cmd. diesel exhaust fluid dosing", 0.5, 0.0, 8, "%"}},
};

#endif // PIDS_DECODER_H
